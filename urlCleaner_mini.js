function providePlugin(a,b){var d=window[window.GoogleAnalyticsObject||"ga"];d&&d("provide",a,b)}var urlCleaner=function(a,b){this.tracker=a;this.params=b.params;this.isDebug=b.debug;this.allowAnchor=b.allowAnchor};
urlCleaner.prototype.clean=function(){if(history.replaceState){var a=location.search,b=location.hash,d=!1;if(0<location.hash.length&&!0==this.allowAnchor){var b=location.hash.substring(1,location.hash.length).split("&"),c="#";for(item in b)this.checkParameter(b[item])&&this.checkCustomParameter(b[item])?c+=b[item]+"&":(this.debugMessage("Removed anchor: "+b[item]),d=!0);b=c.substring(0,c.length-1)}if(0<location.search.length){a=location.search;a=a.substring(1,a.length).split("&");c="?";for(item in a)this.checkParameter(a[item])&&
this.checkCustomParameter(a[item])?c+=a[item]+"&":(this.debugMessage("Removed query: "+a[item]),d=!0);a=c.substring(0,c.length-1)}d&&history.replaceState(void 0,void 0,location.pathname+a+b)}};urlCleaner.prototype.setDebug=function(a){this.isDebug=a};urlCleaner.prototype.debugMessage=function(a){this.isDebug&&console&&console.debug(a)};
urlCleaner.prototype.checkParameter=function(a){a=this.paramKey(a);return a.match("utm_(referrer|expid|source|medium|campaign|term|content|id)|gclid|__utm(a|b|c|x|z|v|k)")?!1:!0};urlCleaner.prototype.checkCustomParameter=function(a){if(this.params){a=this.paramKey(a);for(var b=0;b<this.params.length;b++)if(a==this.params[b].toLowerCase())return!1}return!0};urlCleaner.prototype.paramKey=function(a){return 0<a.indexOf("=")?a.substring(0,a.indexOf("=")).toLowerCase():a};providePlugin("urlCleaner",urlCleaner);
